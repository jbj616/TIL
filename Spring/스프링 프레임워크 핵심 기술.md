## 스프링 프레임워크 핵심 기술

> 인프런 스프링 프레임원크 핵심 기술 강의

## IoC 컨테이너

> Inversion of Control : 의존 관계 주입 DI라고도 하며, 어떤 객체가 사용하는 의존 객체를 직접 만들어 사용하는 게 아니라, 주입 받아 사용하는 방법

1. 스프링 IoC 컨테이너와 빈
   
   스프링 IoC 컨테이너
   
   - BeanFactory
   
   - 애플리케이션 컴포넌트와 중앙 저장소
   
   - 빈 설정 소스로 부터 빈 정의를 읽어들이고, 빈을 구성하고 제공한다.
   
   빈
   
   - 스프링 IoC 컨테이너가 관리하는 객체
   
   - 장점
     
     - 의존성 관리
     
     - 스코프
       
       - 싱글톤 : 하나 - 성능 최적화에서 장점
       
       - 프로토타입 : 매번 다른 객체
     
     - 라이프사이클 인터페이스
     
     ```java
     @PostConstruct
     public void postContruct(){
         System.out.println("Hello");
     }
     ```
     
     
   
   ApplicationContext
   
   - BeanFactory
   
   - 메시지 소스 처리 기능
   
   - 이벤트 발행 기능
   
   - 리소스 로딩 기능...

2.  ApplicationContext와 다양한 빈 설정 방법
   
   xml
   
   ```xml
   <bean id="bookService" class="me.whiteship.springapplicationcontext.BookService" <property name="bookRepository" ref="bookRepository"/>
   </bean>
   
   <bean id="bookRepository" class="me.whiteship.springapplicationcontext.BookRepository"/>
   ```
   
   ```java
   ApplicationContext context = new ClassPathXmlApplicationContext("");
   String[] beanDefinitionNames = context.getBeanDefinitionNames();
   BookService bookService = (BookService) context.get("bookService");
   ```

        AnnotaionConfiguration

```java
  @Configuration
public class ApplicationConfig{
  @Bean
 public BookRepository bookRepository{
 return new BookRepository();
 }
}
```

`@SpringBootApplication`이 알아서 다해줌



3. Autowire
- 사용할 수 있는 위치
  
  - 생성자 (생략 가능)
    
    - 빈이 있어야 객체를 생성함!
  
  - 세터
  
  - 필드
    
    - 옵션을 사용할 때 사용 `required=false`

- 경우의 수
  
  - 해당 타입의 빈이 없는 경우
  
  - 해당 타입의 빈이 한 개인 경우
  
  - 해당 타입의 빈이 여러개인 경우
    
    - 같은이름의 빈 찾으면 해당 빈 사용 못찾으면 실패
    
    - `@Primary`, `@Qualifier` 사용
    
    - 해당 타입의 모든 빈 주입 받기

- 동작원리
  
  - BeanPostProcessor
    
    - 새로 만든 빈 인스턴스를 수정할 수 있는 라이프 사이클 인터페이스
4. Component와 컴포넌트 스캔
- ComponentScan -> 스캔의 범위 @SpringBootApplication이 있는 곳 하위 경로 스캔
  
  - Filter를 통해서 스캔하지 않을 것을 지정해 놨음

- Configuration -> Component에노테이션을 갖음

- 동작원리
  
  - @ComponentScan은 스캔할 패키지와 애노테이션에 대한 정보
  
  - 실제 스캐닝은 ComfigurationClassPostProcessor라는 BeanFactoryPostProcessor에 의해 처리 됨.
